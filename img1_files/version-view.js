define(["jquery","backbone","underscore","plugin-dependencies","common/utils/log","text!./version.html"],function(e,t,s,i,l,n){return n=i.utils.template.createTemplate(n),t.View.extend({tagName:"li",className:"version",events:{"click .version-restore":"handleRestore"},initialize:function(e){s.bindAll(this,"render","handleVersionSelected","handleRestore"),this.model=e.model,this.assetModel=e.assetModel,this.$el.on("click",this.handleVersionSelected)},render:function(){this.$el.html(n({translate:i.translate,_timeAgo:i.translate("Revised {0}",i.utils.dateTimeAgoText(this.model.get("created"))),size:i.utils.translateBytes(this.model.get("size"))}));var e=this.model.get("created");return i.utils.isToday(e)&&this.$el.attr("data-created",e),this.model.get("isVersionHead")&&this.$el.addClass("selected"),this.delegateEvents(this.events),this},handleVersionSelected:function(t){t.stopPropagation();var s=this;l("cca",{desc:"Revised Version",assetid:s.assetModel.get("id"),reviseAction:"View"}),this.$el.hasClass("selected")||(e("li.version, .version-cluster").removeClass("selected"),this.$el.addClass("selected"),this.assetModel.set("_version",this.model.get("revision_number")))},handleRestore:function(e){e.stopPropagation();var t=this;require(["files/dialogs/restore-version/dialog"],function(e){e.setItems([t.assetModel]).show()})}})});