define(["plugin-dependencies","jquery","backbone","underscore","./version-view","text!./version-cluster.html"],function(e,t,s,l,d,n){return n=e.utils.template.createTemplate(n),s.View.extend({tagName:"li",className:"version-cluster",events:{click:"handleSelected"},initialize:function(e){l.bindAll(this,"render","handleSelected"),this.models=e.model,this.assetModel=e.assetModel},render:function(){return this.$el.html(n({translate:e.translate,_timeAgo:e.utils.dateTimeAgoText(this.models[0].get("created")),count:this.models.length})),this.delegateEvents(this.events),this},handleSelected:function(){var s=this,n=t('<dd class="group"><ul></ul></dd>');if(this.$el.hasClass("expanded")){this.$el.removeClass("expanded"),this.$("dd.group").remove();var i=l.map(this.models,function(e){return e.get("revision_number")});-1!=l.indexOf(i,this.assetModel.get("_version"))&&this.$el.addClass("selected")}else l.each(this.models,function(e){n.find("ul").append(new d({model:e,assetModel:s.assetModel}).render().$el)}),this.$("dl").append(n),this.$el.addClass("expanded").removeClass("selected");e.events.trigger("toggle_versions_cluster")}})});