define(["jquery","backbone","underscore","plugin-dependencies","text!./comment.html"],function(e,t,s,n,l){return l=n.utils.template.createTemplate(l),t.View.extend({tagName:"li",className:"comment",events:{"click .comment-delete":"handleDelete"},initialize:function(e){s.bindAll(this,"render","handleDisable","handleDelete"),this.assetModel=e.assetModel,this.model.bind("disable",this.handleDisable)},render:function(){var e=this.model.get("created");return this.$el.html(l({_timeAgo:n.utils.dateTimeAgoText(e),commenter_name:n.utils.htmlEncode(this.model.get("commenter_name")),content:n.utils.htmlEncode(this.model.get("content")),comment_delete:this.readAcl("admin")?'<span class="comment-delete">&times</span>':""})),n.utils.isToday(e)&&this.$el.attr("data-created",e),this.delegateEvents(this.events),this},readAcl:function(e){var t=this.assetModel.get("acl")||[],l=this.assetModel.get("owner"),i=n.user.profile().userId;return s.indexOf(t,e)>=0||l===i},handleDisable:function(){this.$(".comment-btn-delete").remove(),this.$el.css({opacity:.25})},handleDelete:function(){var e=this;require(["files/dialogs/delete-comment/dialog"],function(t){t.setAssetModel(e.assetModel).setItems([e.model]).setElement(e.$el).show()})}})});